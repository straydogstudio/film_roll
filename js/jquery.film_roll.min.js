// Generated by CoffeeScript 1.6.1
/*
  FilmRoll (for jQuery)
  version: 0.1.0 (08/21/2013)
  @requires jQuery >= v1.4

  By Noel Peden
  Examples at http://film_roll.github.io

  Licensed under the MIT:
    http://www.opensource.org/licenses/mit-license.php

  Usage:
    var film_troll = new FilmRoll({container: '#container_id', OPTIONS});
*/(function(){var e=this;this.FilmRoll=function(){function e(t){var n=this;this.options=t;this.rotateRight=function(){return e.prototype.rotateRight.apply(n,arguments)};this.rotateLeft=function(){return e.prototype.rotateLeft.apply(n,arguments)};this.moveRight=function(){return e.prototype.moveRight.apply(n,arguments)};this.moveLeft=function(){return e.prototype.moveLeft.apply(n,arguments)};this.clearTimer=function(){return e.prototype.clearTimer.apply(n,arguments)};this.configureTimer=function(){return e.prototype.configureTimer.apply(n,arguments)};this.options===null&&(this.options={});if(this.options.container){this.div=jQuery(this.options.container);this.configure()}}e.prototype.configure=function(){var e=this;if(this.options.no_css!==!0&&!document.film_roll_styles_added){jQuery("<style type='text/css'>        .film_roll_wrapper {display: block; text-align: center; float: none; position: relative; top: auto; right: auto; bottom: auto; left: auto; z-index: auto; width: 100%; margin: 0px; overflow: hidden; width: 100%}        .film_roll_shuttle {text-align: left; float: none; position: absolute; top: 0; left:0; right: auto; bottom: auto; margin: 0px; z-index: auto}        .film_roll_prev, .film_roll_next {position:absolute; top:48%; left:15px; width:40px; height:40px; margin:-20px 0 0 0; padding:0; font-size:60px; font-weight:100; line-height:30px; color:white; text-align: center; background: #222; border: 3px solid white; border-radius:23px; opacity:0.5}        .film_roll_prev:hover, .film_roll_next:hover {color:white; text-decoration:none; opacity:0.9}        .film_roll_next {left:auto; right:15px}        .film_roll_pager {text-align:center}        .film_roll_pager a {width:5px; height:5px; border:2px solid #333; border-radius:5px; display:inline-block; margin:0 5px 0 0}        .film_roll_pager a:hover {background: #666}        .film_roll_pager a.active {background: #333}        .film_roll_pager span {display:none}      </style>").appendTo("head");document.film_roll_styles_added=!0}this.children=this.div.children();this.children.wrapAll('<div class="film_roll_wrapper"></div>');this.children.wrapAll('<div class="film_roll_shuttle"></div>');this.wrapper=this.div.find(".film_roll_wrapper");this.shuttle=this.div.find(".film_roll_shuttle");this.rotation=[];if(this.options.pager!==!1){this.pager=jQuery('<div class="film_roll_pager">');this.div.append(this.pager);this.children.each(function(t,n){var r;r=jQuery("<a href='#' data-id='"+n.id+"'><span>"+(t+1)+"</span></a>");e.pager.append(r);return r.click(function(){var n,r;e.index=t;r=jQuery.inArray(e.children[t],e.rotation);n=r<e.children.length/2?"right":"left";return e.moveToIndex(e.index,n,!0)})})}this.pager_links=this.div.find(".film_roll_pager a");this.width=this.height=0;this.children.each(function(t,n){var r,i,s;e.rotation.push(n);r=jQuery(n);r.attr("style","position:relative; display:inline-block; vertical-align:middle");s=r.width();e.width+=s;i=r.outerHeight(!0);i>e.height&&(e.height=i);return r.addClass("film_roll_child")});this.shuttle.width(this.width*2);this.options.height&&(this.height=parseInt(this.options.height,10));this.wrapper.height(this.height);this.shuttle.height(this.height);if(this.options.prev&&this.options.next){this.prev=jQuery(this.options.prev);this.next=jQuery(this.options.next)}else{this.wrapper.append('<a class="film_roll_prev" href="#">&lsaquo;</a>');this.wrapper.append('<a class="film_roll_next" href="#">&rsaquo;</a>');this.prev=this.div.find(".film_roll_prev");this.next=this.div.find(".film_roll_next")}this.prev.click(this.moveRight);this.next.click(this.moveLeft);this.index=this.options.start_index||0;this.moveToIndex(this.index,"right",!1);this.interval=this.options.interval||4e3;this.animation=this.options.animation||this.interval/4;if(this.options.scroll!==!1){this.configureTimer();this.div.hover(this.clearTimer,this.configureTimer);this.prev.hover(this.clearTimer,this.configureTimer);this.next.hover(this.clearTimer,this.configureTimer)}jQuery(window).resize(function(){return e.resize()});return this};e.prototype.configureTimer=function(){var e=this;this.timer=setInterval(function(){return e.moveLeft()},this.interval);return this};e.prototype.clearTimer=function(){return clearInterval(this.timer)};e.prototype.marginLeft=function(e){var t,n,r,i,s,o;r=0;o=this.rotation;for(n=i=0,s=o.length;i<s;n=++i){t=o[n];n<e&&(r+=jQuery(t).width())}return r};e.prototype.marginRight=function(e){var t,n,r,i,s,o;r=0;o=this.rotation;for(n=i=0,s=o.length;i<s;n=++i){t=o[n];n>e&&(r+=jQuery(t).width())}return r};e.prototype.moveLeft=function(){this.index=(this.index+1)%this.children.length;this.moveToIndex(this.index,"left",!0);return!1};e.prototype.moveRight=function(){this.index-=1;this.index<0&&(this.index=this.children.length-1);this.moveToIndex(this.index,"right",!0);return!1};e.prototype.moveToIndex=function(e,t,n){var r,i,s,o,u;n===null&&(n=!0);this.children.removeClass("active");this.pager_links.removeClass("active");r=this.children[e];jQuery(r).addClass("active");jQuery(this.pager_links[e]).addClass("active");u=this.wrapper.width();if(u<this.width){s=jQuery.inArray(r,this.rotation);o=(u-jQuery(r).width())/2;if(t==="right")while(s===0||this.marginLeft(s)<o){this.rotateRight();s=jQuery.inArray(r,this.rotation)}else while(s===this.children.length-1||this.marginRight(s)<o){this.rotateLeft();s=jQuery.inArray(r,this.rotation)}i=-1*(this.marginLeft(s)-o);return n?this.shuttle.animate({left:i},this.animation,"swing"):this.shuttle.css("left",i)}};e.prototype.resize=function(){var e=this;clearTimeout(this.resize_timer);this.resize_timer=setTimeout(function(){return e.moveToIndex(e.index,"left")},200);return this};e.prototype.rotateLeft=function(){var e,t,n;e=this.shuttle.css("left");n=e?parseInt(e,10):0;t=this.rotation.shift();this.rotation.push(t);this.shuttle.append(jQuery(t).detach());return this.shuttle.css("left",n+jQuery(t).width())};e.prototype.rotateRight=function(){var e,t,n;e=this.shuttle.css("left");n=e?parseInt(e,10):0;t=this.rotation.pop();this.rotation.unshift(t);this.shuttle.prepend(jQuery(t).detach());return this.shuttle.css("left",n-jQuery(t).width())};return e}()}).call(this);